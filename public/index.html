<!doctype html>
<html lang="en">
  <head>
    <title>Products API</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js" integrity="sha512-bZS47S7sPOxkjU/4Bt0zrhEtWx0y0CRkhEp8IckzK+ltifIIE9EMIMTuT/mEzoIMewUINruDBIR/jJnbguonqQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="/assets/css/style.css">
  </head>
  <body>

      <div class="jumbotron text-center pt-0">
        <div class="d-flex container justify-content-between align-items-center p-4 mb-5 navigation">
            <div class="left">
              <a href="/" class="text-white lead">Products<b>API</b> </a>
            </div>
            <div class="right">
              
            </div>
        </div>
          <h1 class="display-3">Products API</h1>
          <p class="lead">Free CRUD API for products</p>
          <img src="/assets/images/react-illus.svg" height="150" alt="">
          <hr class="my-2">
      </div>
      <div class="container">
          <section>
            <h4>Usage</h4>
            <hr>
            <p class="lead mb-2">Create an account<p>
            <a href="/signup"> Sign up</a> and Get the api key and pass in the haeder as 'x-api-key' to all the api reuests.
            </p>
          </section>
          <section>
            <h4>API Routes</h4>
          <hr>
            <p class="lead"><span class="badge badge-primary mr-2">POST</span><b>/api/product/</b>  -  Create product 
            <p class="lead"><span class="badge badge-success mr-2">GET</span><b>/api/products/</b>  - Gets all the product
            <p class="lead"><span class="badge badge-success mr-2">GET</span><b>/api/product/:id</b> - Get specific product by id</p>
            <p class="lead"><span class="badge badge-warning text-white mr-2">UPDATE</span><b>/api/product/:id</b> - Update specific product by id</p>
            <p class="lead"><span class="badge badge-danger mr-2">DELETE</span><b>/api/product/:id</b> - Delete specific product by id</p>
          
          </section>
          <section>
            <h4>Feedback</h4>
          <hr>
          <form action="/feedback" method="POST">
              <div class="form-group mt-3">
                <label for="name">Name</label>
                <input type="text" id="name" name="name" class="form-control" placeholder="Enter name" required>
              </div>
              <div class="form-group mt-3">
                <label for="email">Email</label>
                <input type="email" id="email" name="email" class="form-control" placeholder="Enter email" required>
              </div>
              <div class="form-group mt-3">
                <label for="feedback">Feedback</label>
                <textarea name="feedback" id="feedback" class="form-control" placeholder="Add feedback here" required></textarea>
              </div>
              <button class="btn btn-primary btn-block" type="submit">Submit</button>
            </form>
          </section>

      </div>
      
      <footer class="mt-5 p-5 bg-dark text-white text-center">
        <p><a href="https://github.com/thewebmonk" class="text-white lead text-center mt-5">By Ashish Patel (thewebmonk)</a></p>
        <a href="/about" class="text-white lead text-center mt-5">About Us</a>
      </footer>

      
    <script>

      async function checkAuth(){ 
        axios.defaults.withcredentials = true
        await axios.post('/checkAuth')
          .then(res=>{
            navHTML = `
              <a href="/dashboard" class="btn btn-primary">${res.data.payload.name}</a>
              <button onclick="logout()" class="btn btn-outline-light ml-3">Logout</button>
            `
          })
          .catch(err=>{
            console.log(err)
            navHTML = `
              <a href="/signup" class="btn btn-primary">Sign Up</a>
            <a href="/login" class="btn btn-outline-light ml-3">Login</a>
            `
          })
          document.querySelector('.navigation .right').innerHTML = navHTML
        }
        checkAuth()

      async function logout(){
        axios.defaults.withcredentials = true
        await axios.post('/logout')
        .then(res=>{
          console.log(res)
        })
        .catch(err=>{
         console.log(err)
        })

        checkAuth()
      }
    </script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
  </body>
</html>




